### 9장 이동,대칭,회전,워핑 기하학적 변환

#### 이동 기하학 변환

* 디지털 영상을 평면의 한 위치에서 원하는 다른 위치로 옮기는 연산

* 디지털 영상의 크기나 형태 등이 바뀌지 않아 원본 영상과 결과 같음

  ![image-20210526103746658](C:\Users\aro\AppData\Roaming\Typora\typora-user-images\image-20210526103746658.png)



##### < 이동 기하학 변환 결과>

![image-20210526103923747](C:\Users\aro\AppData\Roaming\Typora\typora-user-images\image-20210526103923747.png)

* 결과 영상이 오른쪽 아래로 이동



##### 대칭 기하학 변환

* 영상을 가로축이나 세로축으로 단순히 뒤집는 것
* 세로축을 중심으로 뒤집는 것 -> 좌우 대칭
* 가로축을 중심으로 뒤집는 것 -> 상하 대칭



##### 좌우대칭

* 영상을 세로축을 중심으로 뒤집는 것
* 즉 , 영상 내의 한 수직선을 중심으로 왼쪽 화소와 오른쪽 화소를 서로 교환하는 것

![image-20210526104114623](C:\Users\aro\AppData\Roaming\Typora\typora-user-images\image-20210526104114623.png)

##### < 좌우대칭 결과>

![image-20210526104158135](C:\Users\aro\AppData\Roaming\Typora\typora-user-images\image-20210526104158135.png)



##### 상하대칭

* 영상을 가로축을 중심으로 뒤집는 것
* 즉, 영상 내의 한 수평선을 중심으로 위쪽의 화소와 아래쪽의 화소를 교환하는 것

![image-20210526104323782](C:\Users\aro\AppData\Roaming\Typora\typora-user-images\image-20210526104323782.png)



##### < 상하대칭 결과>

![image-20210526104305616](C:\Users\aro\AppData\Roaming\Typora\typora-user-images\image-20210526104305616.png)



##### 회전 기하학 변환

영상을 임의의 방향으로 특정한 각도 θ 만큼 회전 시키는 것

![image-20210526104459501](C:\Users\aro\AppData\Roaming\Typora\typora-user-images\image-20210526104459501.png)

![image-20210526104518449](C:\Users\aro\AppData\Roaming\Typora\typora-user-images\image-20210526104518449.png)



##### 홀 문제를 해결하는 방안

* 먼저 회전 기하학 변환을 역방향 사상으로 수행
* 영상의 회전 방향은 원하는 목적에 따라 다름
* 회전의 방향을 반시계 방향으로 설정한 예
  * 전반향 사상에서 회전방향은 반시계 방향, 역방향 사상에서 회전방향은 시계 방향이 됨

![image-20210526104639086](C:\Users\aro\AppData\Roaming\Typora\typora-user-images\image-20210526104639086.png)



##### 회전 결과 보이는 부분이 줄어드는 것을 방지하는 방법

* 회전 결과: 화소의 좌표 값이 음(-)
  * 실제 화소 좌표는 음의 값일 수 없으므로 해당 부분은 잘려 안보이게 됨

* 전방향 사상공식

  ![image-20210526104904432](C:\Users\aro\AppData\Roaming\Typora\typora-user-images\image-20210526104904432.png)

* 더 효율적으로 회전하기 위해 역방향 사상을 고려한 공식

![image-20210526104929960](C:\Users\aro\AppData\Roaming\Typora\typora-user-images\image-20210526104929960.png)

* 올바르게 회전하도록 하려면 화면 좌표를 수학적 좌표로 변환하여 회전한 뒤 다시 화면 좌표로 변환해야 함



##### 출력 영상의 크기를 고려한 회전 변환

* 회전 기하학 변환에서 입력 영상과 출력 영상의 크기를 같게 하면 출력 영상에서 잘려나가는 부분이 발생
* 회전의 기준을 원점에서 영상의 중심점으로 변경하면 이런 문제를 어느정도 해결 할 수는 있지만 그래도 잘려나가는 부분 발생
* 출력 영상에서 잘려 나가는 부분이 없게 하려면 출력 영상의 크기를 미리 계산해야함 
* 공식
  * H,W : 원본 영상의 높이와 너비
  * H',W' : 회전한 출력 영상의 높이와 너비 

![image-20210526110903016](C:\Users\aro\AppData\Roaming\Typora\typora-user-images\image-20210526110903016.png)

![image-20210526110925344](C:\Users\aro\AppData\Roaming\Typora\typora-user-images\image-20210526110925344.png)



##### <영상 변환 결과>

![image-20210526111124691](C:\Users\aro\AppData\Roaming\Typora\typora-user-images\image-20210526111124691.png)



##### 워핑(Warping)

* 비선형이나 왜곡 변환을 수행
* 고무시트 변환(Rubber Sheet Transform)이라고 함
* 화소별로 이동 정도를 달리해 고무판 위에 그린 영상을 임의로 구부린 듯한 효과를 냄



##### 매시워핑(Mesh Warping)

* 입력 영상을 작은 삼각형이나 사격형 격자(Mesh)로 나눠서 변형시켜 목적하는 결과 영상을 얻음.
* 격자의 모양인 다각형의 기하학적 변형 수행 

![image-20210526111339201](C:\Users\aro\AppData\Roaming\Typora\typora-user-images\image-20210526111339201.png)



##### 모핑기술

* 변형에서 유래된 모핑은 한 영상을 서서히 변화시켜 다른 영상으로 변환하는 기술
* 원본 영상과 최종 영상은 물론, 최종 영상으로 매끄럽게 변할 수 있도록 많은 중간 단계의 영상도 필요함 

![image-20210526111443018](C:\Users\aro\AppData\Roaming\Typora\typora-user-images\image-20210526111443018.png)



* 중간 단계의 영상을 생성하려면 워핑과 합병의 두 단계를 거쳐야 함.
* 영상의 워핑 기술: 두 영상의 중요한 특징을 좀 더 가깝게 정렬 하는데 사용
* 합병: 영상이 순차적으로 자연스럽게 융화되도록 하는 크로스 디졸브로 처리됨

![image-20210526111601804](C:\Users\aro\AppData\Roaming\Typora\typora-user-images\image-20210526111601804.png)



* 전이 모핑: 초기 영상과 최종 영상이 달라 전혀 다른 내용으로 변하는 것
* 왜곡 모핑: 같은 내용에서 일부분이 변하는 것. 워핑의 개념과 비슷하나 중간 영상을 생성하여 변하는 과정을 보여준다는 차이가 있음
