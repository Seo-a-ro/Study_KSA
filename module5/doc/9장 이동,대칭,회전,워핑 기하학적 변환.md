### 9장 이동,대칭,회전,워핑 기하학적 변환

#### 이동 기하학 변환

* 디지털 영상을 평면의 한 위치에서 원하는 다른 위치로 옮기는 연산

* 디지털 영상의 크기나 형태 등이 바뀌지 않아 원본 영상과 결과 같음

  ![image-20210526103746658](https://user-images.githubusercontent.com/82528589/119769368-4e9b5600-bef5-11eb-9faa-2cad547300fe.png)



##### < 이동 기하학 변환 결과>
![image-20210526103923747](https://user-images.githubusercontent.com/82528589/119769383-55c26400-bef5-11eb-8b30-7c4781ce182f.png)

* 결과 영상이 오른쪽 아래로 이동



##### 대칭 기하학 변환

* 영상을 가로축이나 세로축으로 단순히 뒤집는 것
* 세로축을 중심으로 뒤집는 것 -> 좌우 대칭
* 가로축을 중심으로 뒤집는 것 -> 상하 대칭



##### 좌우대칭

* 영상을 세로축을 중심으로 뒤집는 것
* 즉 , 영상 내의 한 수직선을 중심으로 왼쪽 화소와 오른쪽 화소를 서로 교환하는 것

![image-20210526104114623](https://user-images.githubusercontent.com/82528589/119769404-5eb33580-bef5-11eb-99e5-65b5dca43a84.png)

##### < 좌우대칭 결과>

![image-20210526104158135](https://user-images.githubusercontent.com/82528589/119769426-670b7080-bef5-11eb-9659-2778bbb4bb75.png)


##### 상하대칭

* 영상을 가로축을 중심으로 뒤집는 것
* 즉, 영상 내의 한 수평선을 중심으로 위쪽의 화소와 아래쪽의 화소를 교환하는 것

![image-20210526104323782](https://user-images.githubusercontent.com/82528589/119769450-6d99e800-bef5-11eb-9afa-977315059bb4.png)



##### < 상하대칭 결과>

![image-20210526104305616](https://user-images.githubusercontent.com/82528589/119769475-78547d00-bef5-11eb-914a-c03ed75566bd.png)



##### 회전 기하학 변환

영상을 임의의 방향으로 특정한 각도 θ 만큼 회전 시키는 것
![image-20210526104459501](https://user-images.githubusercontent.com/82528589/119773978-6a562a80-befc-11eb-977a-0e5c72186203.png)

![image-20210526104518449](https://user-images.githubusercontent.com/82528589/119773989-704c0b80-befc-11eb-99af-3aded50a45d8.png)



##### 홀 문제를 해결하는 방안

* 먼저 회전 기하학 변환을 역방향 사상으로 수행
* 영상의 회전 방향은 원하는 목적에 따라 다름
* 회전의 방향을 반시계 방향으로 설정한 예
  * 전반향 사상에서 회전방향은 반시계 방향, 역방향 사상에서 회전방향은 시계 방향이 됨

![image-20210526104639086](https://user-images.githubusercontent.com/82528589/119774014-7c37cd80-befc-11eb-8de6-2374dab0d5b6.png)



##### 회전 결과 보이는 부분이 줄어드는 것을 방지하는 방법

* 회전 결과: 화소의 좌표 값이 음(-)
  * 실제 화소 좌표는 음의 값일 수 없으므로 해당 부분은 잘려 안보이게 됨

* 전방향 사상공식

  ![image-20210526104904432](https://user-images.githubusercontent.com/82528589/119774033-85c13580-befc-11eb-86a1-b22e79623933.png)

* 더 효율적으로 회전하기 위해 역방향 사상을 고려한 공식

![image-20210526104929960](https://user-images.githubusercontent.com/82528589/119774080-97a2d880-befc-11eb-830b-f3ad93814810.png)

* 올바르게 회전하도록 하려면 화면 좌표를 수학적 좌표로 변환하여 회전한 뒤 다시 화면 좌표로 변환해야 함



##### 출력 영상의 크기를 고려한 회전 변환

* 회전 기하학 변환에서 입력 영상과 출력 영상의 크기를 같게 하면 출력 영상에서 잘려나가는 부분이 발생
* 회전의 기준을 원점에서 영상의 중심점으로 변경하면 이런 문제를 어느정도 해결 할 수는 있지만 그래도 잘려나가는 부분 발생
* 출력 영상에서 잘려 나가는 부분이 없게 하려면 출력 영상의 크기를 미리 계산해야함 
* 공식
  * H,W : 원본 영상의 높이와 너비
  * H',W' : 회전한 출력 영상의 높이와 너비 

![image-20210526110903016](https://user-images.githubusercontent.com/82528589/119774498-362f3980-befd-11eb-99e0-d084dc475c0d.png)

![image-20210526110925344](https://user-images.githubusercontent.com/82528589/119774522-3f200b00-befd-11eb-9bdd-d2016b496a5d.png)



##### <영상 변환 결과>

![image-20210526111124691](https://user-images.githubusercontent.com/82528589/119774543-46dfaf80-befd-11eb-9ac0-397d448f6e57.png)



##### 워핑(Warping)

* 비선형이나 왜곡 변환을 수행
* 고무시트 변환(Rubber Sheet Transform)이라고 함
* 화소별로 이동 정도를 달리해 고무판 위에 그린 영상을 임의로 구부린 듯한 효과를 냄



##### 매시워핑(Mesh Warping)

* 입력 영상을 작은 삼각형이나 사격형 격자(Mesh)로 나눠서 변형시켜 목적하는 결과 영상을 얻음.
* 격자의 모양인 다각형의 기하학적 변형 수행 

![image-20210526111339201](https://user-images.githubusercontent.com/82528589/119774561-4e06bd80-befd-11eb-999e-018b784db065.png)



##### 모핑기술

* 변형에서 유래된 모핑은 한 영상을 서서히 변화시켜 다른 영상으로 변환하는 기술
* 원본 영상과 최종 영상은 물론, 최종 영상으로 매끄럽게 변할 수 있도록 많은 중간 단계의 영상도 필요함 

![image-20210526111443018](https://user-images.githubusercontent.com/82528589/119774581-56f78f00-befd-11eb-918e-f7fdcb3133cf.png)



* 중간 단계의 영상을 생성하려면 워핑과 합병의 두 단계를 거쳐야 함.
* 영상의 워핑 기술: 두 영상의 중요한 특징을 좀 더 가깝게 정렬 하는데 사용
* 합병: 영상이 순차적으로 자연스럽게 융화되도록 하는 크로스 디졸브로 처리됨

![image-20210526111601804](https://user-images.githubusercontent.com/82528589/119774606-5fe86080-befd-11eb-9b31-ec479e204666.png)



* 전이 모핑: 초기 영상과 최종 영상이 달라 전혀 다른 내용으로 변하는 것
* 왜곡 모핑: 같은 내용에서 일부분이 변하는 것. 워핑의 개념과 비슷하나 중간 영상을 생성하여 변하는 과정을 보여준다는 차이가 있음
