## module11. RNN

### 4. 텍스트의 전처리

---

#### 4.0  NLP 프로젝트 워크플로우



![image-20210626161124883](C:\Users\user\AppData\Roaming\Typora\typora-user-images\image-20210626161124883.png)

---

#### 4.1 비정형 데이터 내의 오류

* 비정형 데이터(Unstructured data)
  * 일정한 규격이나 형태를 지닌 숫자 데이터(numeric data)와 달리 그림이나 영상, 문서처럼 형태와 구조가 다른 구조화되지 않은 데이터 (ex. 음성정보, 동영상 정보, 시각정보 등)
  * 정의될 수 있는 확실한 기준이 없어 정의 내리고 이해하기 어렵다.
* 분석을 위해서는 비정형 데이터의 정형화가 요구됨. 정형화 과정을 전처리라 지칭한다.
* 세상에 존재하는 대부분의 가공되지 않은 데이터는 비정형 데이터의 형식이기 때문에 이 과정은 필수적이다. 

![image-20210626161419528](C:\Users\user\AppData\Roaming\Typora\typora-user-images\image-20210626161419528.png)



---

#### 4.2 텍스트 문서의 변환

html 파일 형식의 경우 쓸데없는 <center>, <begin> 없애주고 pdf 파일의 경우에는 줄바꿈이 되어있을 때 줄바꿈도 다 없어줘야한다. 

파일 종류에 따라 원하지않은 정보와 띄어쓰기가 있을 수 있으므로 다 처리해주기 

줄 바 꿈이 필요한 텍스트는 모든 다 줄을 바꾸기보단 중요해서 띄어쓰기를 처리할 수 있으므로 우리 시스템이 어떨때 더 작동을 잘하는지 알아야한다. 



* 인터렉티브한 노이즈 제거 과정 
  * 규칙에 의해 노이즈를 제거하기 때문에 노이즈 전부를 제거하는 것은 어렵다.
  * 따라서 반복적인 규칙생성 및 적용 과정이 필요하다. 
  * 노력과 품질 사이의 trade- off (얼마만큼 노력해서 좋은 품지릉ㄹ 만들지, 시간을 들인만큼 좋은 품질이 되긴함. 실무에서 자연어 처리를 진행해야 한다면 task와 자신의 감에 따라서(노하우 필요)진행해야함.)

---

#### 4.3 띄어쓰기 교정 방법

* 띄어쓰기 : 한국어는 크게 의미분절, 가독성, 의미혼용 방지의 용도
* 영어는 띄어쓰기가 잘되어있는데 한국어는 어려움
  * 의미분절: 각 단어 및 조사간 구분을 명확하게 해줌으로써 더 간편한 프로세싱이 가능
  * 가독성: 문맥상 의미파악에 대한 부담을 덜어줌
  * 의미혼용 방지: 띄어쓰기의 부재는 의미혼용의 여지를 주어 문장열 처리 시 오류율이 높아지는 결과를 초래 
* 실생활에서는 띄어쓰기가 제대로 되어있지 않은 경우가 많다
* ex> 아버지가 방에 들어가신다. / 아버지 가방에 들어가신다. 



##### 규칙기반 

* 형태소 분석기를 사용하는 규칙기반의 분석적인 방법
* 규칙: 주로 어휘지식, 규칙, 오류 유형 등의 휴리스틱 규칙을 이용
* 장점: 매우 높은 정확도
* 단점: 
  * 해당 규칙은 해당 경우에서만 사용 가능
  * 실질적으로 무한한 경우의 수를 고려해 모든 규칙을 사람이 만들어야 한다는 점에서 불가능
  * 비교적 분석과정이 복잡하고, 어휘지식이 구축관리 비용이 큼
  * 시스템 유지 및 보수가 어려워지는 문제로 연결 
  * 손수 제작해야 하므로 높은 성능일수록 시간적, 인적 비용이 매우 증가 
* 어절 블록 양방향 알고리즘
  * 조사나 어미로 쓰이는 음절이 극히 제한적이라는 특성을 이용해 띄어쓰기가 되지 않은 입력 문장에서 어절 경계에 해당하는 부분을 찾음 
  * 세 단계를 거쳐 자동 띄어쓰기 
    1. 어절 블록 인식
    2.  어절 블록 내의 어절 인식
    3.  어절 인식 오류 교정 
  * 의미적으로 중의성을 띄는 구간이나 오타에는 성능이 크게 약해짐 



##### 통계 확률 기반

* 언어 모델링 방법을 사용해 학습 코퍼스 내에서 수정 방향이 옳을 확률이 높은 후보들을 차례로 나열 후 가장확률이 높은 후보로 교정을 수행한다.

* 장점
  - 구현 용이
  - 어휘 지식 구축관리 및 미등록어에 대한 견고한 분석 가능 
  
* 단점
  * 학습 코퍼스의 영향을 크게 받음으로써 오류율이 높음
  * 대량의 학습 데이터를 요구
    * 한국어의 경우 띄어쓰기가 올바른 학습 말뭉치를 구하기가 어려움
  
  ---

#### 4.4 철자 및 맞춤법 교정방법

* 철차 교정: 정확한 의미전송 및 정보교환에 필요

  * 띄어쓰기 교정의 연장선과 유사한 이유
  * 의미혼용 방지 및 정보전달 실패 방지를 위해 반드시 필요

  

* 이를 위해 시행하는 게 '맞춤법 검사'

   

* 맞춤법 및 철자교정기의 두 가지 수행 역할
  * 텍스트 내 오류 감지 
  * 오류의 수정
  
* 오류를 감지하기 위해서는 어떤 오류들의 나타나는지 파악해야 함 

   

* 오타로 인행 발생할 수 있는 오류
   * 삽입(insertion): 'the' 를 'ther'처럼 추가적으로 문자를 입력하는 오류
   * 생략(deletion): 'the'를 'th' 처럼 본래 있어야 하는 문자를 생략하는 오류
   * 대체(substitution): 'the'를 'thw'처럼 본래 넣어야 할 문자 대신 타 문자를 대입하는 오류
   * 순열(transposition): 'the'를 'hte'처럼 철자 순서가 뒤바뀌어 있는 오류

---

#####  규칙기반

* 띄어쓰기 교정기의 규칙기반 방법 장단점과 흡사 

  

* 언어 현상의 규칙성을 추가로 응용하는 방식

  * 어절은 어절보다 작은단위(형태소)들이 일정한 규칙에 따라 결합하여 이루어짐

  * '먹었습니다' 는 '먹'+'었'+'습니다' 로 , '학교에서조차도'는 '학교'+'에서'+'조차'+도로 구성

  * 어절을 형태소들로 분절하는 '형태소 분석기'를 사용한 방식이 존재

    

* 맞춤법 교정과정 

  ![image-20210627200619179](C:\Users\user\AppData\Roaming\Typora\typora-user-images\image-20210627200619179.png)

* 해당 방법을 구현하기 위해서는 다음이 요구됨
  * 체언, 용언, 어미, 조사 등으로 구성된 품질 좋은 사전
  * 형태소들 간 접속 가능 관계가 표현된 정밀한 접속 정보표 

* 규칙기반 절차 및 맞춤법 교정 과정
  1. 형태소 분석기로 하나의 어절이 입력된 어절을 형태소로 분절
  2. 분절 결과가 적합한지 접속 정보표를 이용하여 확인
     * 다음 표에 나타난 태그 셋으로 형태소 표현
  3. 주어진 입력 어절을 성공적으로 분석할 수 없을 경우, 맞춤법이 틀린 어절로 간주
  4. 맞춤법이 틀린 어절은 조사/어미 등의 문법 형태소의 음절 정보나 대규모 코퍼스로부터 얻어진 음절 간 결합 정보를 이용해 맞춤법 교정



##### 통계,확률 기반

* Bayesian inference model 
  * 올바른 교정 결과 c hat을 도출하기 위해 주어진 단어로부터 오타가 일어날 확률을 확률적으로 계산하는 방법 

![image-20210627201214544](C:\Users\user\AppData\Roaming\Typora\typora-user-images\image-20210627201214544.png)

* 예시
  * 병원 암 진단 검사에서 '양성'이 나왔다면, 진짜 암일 확률은? 

   ![image-20210627201659998](C:\Users\user\AppData\Roaming\Typora\typora-user-images\image-20210627201659998.png)

